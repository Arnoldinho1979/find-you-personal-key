<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TONART-O-MAT</title>
    <style>
        body {
            font-family: "Times New Roman", serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .statement { margin: 20px; font-size: 24px; text-align: center; }
        .button {
            margin: 5px; 
            padding: 10px; 
            font-size: 18px; 
            display: inline-block;
        }
    </style>
</head>
<body>
<h1 style="text-align: center; font-size: 3em; margin-bottom: 0px; width: 100%">TONART-O-MAT</h1>
<h2 style="text-align: center; margin-bottom: 19px; width: 100%;">Welche Tonart passt zu mir?</h2>

<div class="statement" id="question"></div>
<div class="button-container">
    <button class="button" onclick="answer(1)">Ja</button>
    <button class="button" onclick="answer(2)">Nein</button>
    <button class="button" onclick="answer(3)">Weiß nicht</button>
</div>

<script>
    const statements = [
        "01 Statement.",
        "02 Statement.",
        "03 Statement.",
        "04 Statement.",
        "05 Statement.",
        "06 Statement.",
        "07 Statement.",
        "08 Statement.",
        "09 Statement.",
        "10 Statement.",
        "11 Statement.",
        "12 Statement.",
        "13 Statement.",
        "14 Statement.",
        "15 Statement.",
        "16 Statement.",
        "17 Statement.",
        "18 Statement.",
        "19 Statement.",
        "20 Statement.",
        "21 Statement.",
        "22 Statement.",
        "23 Statement.",
        "24 Statement."
    ];

    const tonart = {
        "Wie schön leuchtet der Morgenstern<br>BWV 1 (Leipzig 1725)": {
            scores: [3, 2, 3, 2, 2, 2, 1, 2, 2, 1, 3, 1],
            videoUrl: "https://www.youtube.com/embed/7fNaMOtVUc4?si=PzaBM1rsm1pR_hCm"
        },
        "Ach Gott, vom Himmel sieh darein<br>BWV 2 (Leipzig 1724)": {
            scores: [3, 1, 2, 2, 2, 1, 2, 2, 3, 1, 2, 1],
            videoUrl: "https://www.youtube.com/embed/O9edOndqIZI?si=2n8iUro64I0Rd2rz"

       


            
        }
    };

    let currentQuestion = 0;
    let userResponses = [];

    function displayQuestion() {
        document.getElementById("question").textContent = statements[currentQuestion];
    }

    function answer(response) {
        userResponses.push(response);
        currentQuestion++;
        
        if (currentQuestion < statements.length) {
            displayQuestion();
        } else {
            showResult();
        }
    }

    function showResult() {
        let result = determineResult();
        document.getElementById("question").innerHTML = `
            Am besten passt zu dir ... ...<br><br>${result.tonart}<br><br>
            <iframe width="560" height="315" src="${result.videoUrl}" frameborder="0" allowfullscreen></iframe>
        `;
        document.querySelectorAll("button").forEach(btn => btn.style.display = "none");
    }

    function determineResult() {
        let besttonart = null;
        let bestScore = -1;

        for (let tonart in tonart) {
            const { scores } = tonart[tonart];
            let score = 0;

            let minLength = Math.min(userResponses.length, scores.length);
            for (let i = 0; i < minLength; i++) {
                if (userResponses[i] === scores[i]) {
                    score++;
                }
            }

            if (score > bestScore) {
                bestScore = score;
                besttonart = tonart;
            }
        }

        // Fallback: Wenn keine exakte Übereinstimmung vorhanden ist, gebe das beste ähnliche Ergebnis zurück
        if (bestScore === 0) {
            return { Tonart: "BWV 147", videoUrl: tonarten["BWV 147"].videoUrl }; // Beispiel für Standard-Ersatz-Tonart
        }

        return { tonart: besttonart, videoUrl: tonart[besttonart].videoUrl };
    }

    displayQuestion();
</script>
</body>
</html>
